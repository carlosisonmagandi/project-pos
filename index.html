<!DOCTYPE html>
<html>
<head>
  <title>Admin account</title>
  <link rel="stylesheet" href="POS/style.css">
  <style>
    #tableDiv{
      border: 1px solid rgb(216, 216, 216);
      padding: 20px;
      border-radius: 6px;
    }
  </style>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
  <script>
    function addAccount() {
      var userName = document.getElementById('userName').value;
      var email = document.getElementById('email').value;
      var password = document.getElementById('password').value;
      var role='Admin';
      var session='True';

      var account = { userName: userName, email: email,password:password, role:role, session:session};

      // Retrieve existing accounts from local storage
      var accounts = JSON.parse(localStorage.getItem('accounts')) || [];

      // Add new account to the array
      accounts.push(account);

      // Store updated accounts in local storage
      localStorage.setItem('accounts', JSON.stringify(accounts));

      // Clear input fields
      document.getElementById('userName').value = '';
      document.getElementById('email').value = '';
      document.getElementById('password').value = '';
  

      // Refresh account list
      displayAccounts();
    }
    

    function displayAccounts() {
      var accounts = JSON.parse(localStorage.getItem('accounts')) || [];
      var tableBody = document.getElementById('accountList');
      tableBody.innerHTML = '';

      for (var i = 0; i < accounts.length; i++) {
        var row = tableBody.insertRow(i);
        var usernameCell = row.insertCell(0);
        var passwordCell=row.insertCell(1)
        var emailCell = row.insertCell(2);
        var roleCell = row.insertCell(3);
        var deleteCell = row.insertCell(4);
        var updateCell = row.insertCell(5);
        var sessionCell= row.insertCell(6);

        usernameCell.innerHTML = accounts[i].userName;
        passwordCell.innerHTML = accounts[i].password;
        emailCell.innerHTML = accounts[i].email;
        roleCell.innerHTML = accounts[i].role;
        deleteCell.innerHTML = '<button onclick="deleteAccount(' + i + ')">Delete</button>';
        updateCell.innerHTML = '<button onclick="updateAccount(' + i + ')">Update</button>';
        sessionCell.innerHTML = accounts[i].session;
      }
    }

    function updateAccount(index) {
        var accounts = JSON.parse(localStorage.getItem('accounts')) || [];
        var account = accounts[index];

        var newUserName = prompt("Enter the new username:", account.userName);
        var newEmail = prompt("Enter the new email:", account.email);
        var newPassword= prompt("Enter the new password:", account.password);
       

        if (newUserName && newEmail &&newPassword) {
          account.userName = newUserName;
          account.email = newEmail;
          account.password=newPassword;

          localStorage.setItem('accounts', JSON.stringify(accounts));
          displayAccounts();
        }
      }
    function deleteAccount(index) {
      var accounts = JSON.parse(localStorage.getItem('accounts')) || [];
      accounts.splice(index, 1);
      localStorage.setItem('accounts', JSON.stringify(accounts));
      displayAccounts();
    }
    
    
    // Initial display of accounts
    //displayAccounts();
  </script>
</head>
<body onload="displayAccounts()"> 
  <br><br>
  <div class="container">
    <h1>Create Admin</h1>

    <div id="tableDiv">
      <table class="table">
        <thead>
          <tr>
            <th>Username</th>
            <th>Password</th>
            <th>Email</th>
            <th>Role</th>
            <th>Action</th>
            <th></th>
          </tr>
        </thead>
        <tbody id="accountList"></tbody>
      </table>
    </div>
    <br><br>
    

    <h2>Add Account</h2>
    <form onsubmit="event.preventDefault(); addAccount();">
      <div class="mb-3">
        <label for="userName" class="form-label">Username:</label>
        <input type="text" id="userName" class="form-control" required>
      </div>

      <div class="mb-3">
        <label for="password" class="form-label">Password:</label>
        <input type="password" id="password" class="form-control" required>
      </div>

      <div class="mb-3">
        <label for="email" class="form-label">Email:</label>
        <input type="email" id="email" class="form-control" required>
      </div>

      <button type="submit" class="btn btn-primary">Add</button>
    </form>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.7.0/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    // Your JavaScript code here (displayAccounts() and addAccount() functions)
  </script>
</body>
</html>
